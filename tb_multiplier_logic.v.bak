`timescale 1ns/1ps

module tb_multiplier_logic_only;

    reg         clk;
    reg         rst_n;
    reg [15:0]  a;
    reg [15:0]  b;
    wire [31:0] y;

    multiplier_logic_only dut (
        .clk   (clk),
        .rst_n (rst_n),
        .a     (a),
        .b     (b),
        .y     (y)
    );

    // 10 ns clock
    always #5 clk = ~clk;

    task run_test(input [15:0] ta, input [15:0] tb);
        begin
            a = ta;
            b = tb;
            repeat (20) @(posedge clk);
            $display("a=%0d b=%0d | y=%0d | expected=%0d",
                     ta, tb, y, ta * tb);
        end
    endtask

    initial begin
        clk   = 0;
        rst_n = 0;
        a     = 0;
        b     = 0;

        #20 rst_n = 1;

        run_test(3, 7);
        run_test(12, 9);
        run_test(45, 23);
        run_test(255, 255);
        run_test(1024, 16);

        #50;
        $display("Simulation done");
        $stop;
    end

endmodule
